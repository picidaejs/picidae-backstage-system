/**
 * @file   style-useable-hmr
 * @author yucong02
 */

const isDevMode = process.env.NODE_ENV !== 'production'

export default function (styleInstance = {}) {
  return componentClass =>
    class SUH extends componentClass {
      componentWillMount(...args) {
        styleInstance.use && styleInstance.use()
        if (super.componentWillMount) {
          super.componentWillMount.apply(this, args)
        }
      }

      componentWillUnmount(...args) {
        if (!module.hot || !isDevMode) {
          styleInstance.unuse && styleInstance.unuse()
        }
        //     &&
        if (super.componentWillUnmount) {
          super.componentWillUnmount.apply(this, args)
        }
      }
    }
}