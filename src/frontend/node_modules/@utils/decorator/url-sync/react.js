/**
 * @file: index
 * @author: Cuttle Cong
 * @date: 2017/11/6
 * @description:
 */
import {
  invokedWithArgs
} from '../utils'

import urlsync from './core'

const keyMap = {
  initKey: 'componentWillMount',
  updateKey: 'componentWillReceiveProps',
  exitKey: 'componentWillUnmount',
  loose: true
}

export default (...args) => {
  if (invokedWithArgs(args)) {
    return (...innerArgs) =>
      urlsync(args[0] ? args[0] : innerArgs[1], { ...keyMap, ...args[1] }, ...innerArgs)
  } 
  return urlsync(args[1], keyMap, ...args)
    
}